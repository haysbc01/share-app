<!DOCTYPE html>
<html ng-app='share'>
  <head>
    <meta charset="utf-8">
    <title>Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.6.1/angular.js" charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/danialfarid-angular-file-upload/12.2.13/ng-file-upload.js" charset="utf-8"></script>

    <script src="./js/module.js" charset="utf-8"></script>
    <script src="./js/dash.controller.js" charset="utf-8"></script>
    <script src="./js/factory.dash.js" charset="utf-8"></script>
    <script src="./js/controller.js" charset="utf-8"></script>
    <script src="./js/factory.share.js" charset="utf-8"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body >

    <nav class="navbar navbar-inverse" ng-controller='shareController as share'>
      <div class="container-fluid">
        <div class="navbar-header right">
          <a href="/"><h3 class="col-xs-4">Home</h3></a>
          <h3 class="col-xs-4">How it Works</h3>
          <a href="/dashboard"><h3 class="col-xs-4" ng-show='share.data'>My Profile</h3></a>
          <a href="/auth"><h3 class="col-xs-4" ng-hide='share.data'>Login / Signup</h3></a>
        </div>
      </div>
    </nav>

    <div ng-controller='dashController as dash'>


      <a href="/logout"><h3>logout</h3></a>
      <h1>{{dash.greeting}} {{dash.data.email}}</h1>
    </div>

    <div class="container" ng-controller='shareController as share'>
      <div class="row">


        <form class="col-xs-8" ngf-drop multiple ng-model='share.newfiles'>
          <div class="form-group">
            <!-- <button class="drop-box" ngf-drop multiple ng-model='share.newfiles'>Drag and Drop</button> -->
            <h3>Drag and Drop anywhere</h3>
            <h6>or</h6>

            <button ngf-select multiple ng-model='share.newfiles'>Select Files</button>
            <h6 ng-hide='share.data'>size limit 100mg</h6>
            <h6 ng-show='share.data'>size limit 500mg</h6>
            <h2 ng-show='share.big'>Upload is too big, <a href="/auth">create or sign</a> in to be able to upload up to 500mg</h2>

            <h5 ng-repeat='name in share.newfiles'>{{name.name}}</h5>
          </div>


         <div class="form-group" ng-hide='share.data'>
           <label for="Email" >Email address</label>
           <input type="email" class="form-control" id="Email" placeholder="Email" ng-model='share.email'>
         </div>

         <div class="form-group">
           <label for="downloadCode">Download Code</label>
           <input ng-class='{red: share.checkCode === true}' class="form-control" id="downloadCode" placeholder="Download Code" ng-model='share.downloadCode'>
         </div>

         <button type="submit" class="btn btn-default" ng-click='share.submit()'>Submit</button>
        </form>


        <form class="col-xs-4">
          <div class="form-group">
            <label for="fetchCode" >Enter a Download Code</label>
            <input ng-class='{red: share.noCode === true}' class='form-control' placeholder='{{share.userCodePlaceHolder}}' ng-model='share.userCode'>

          </div>
          <button type="submit" class="btn btn-default" ng-click='share.download()'>Submit</button>
          <br>
          <h5>{{share.noDice}}</h5>
          <div ng-repeat='file in share.dataFiles.files'>

          <a href='/download?path={{file.path}}' download='{{file.name}}'><img class='icon' ng-src="{{file.fileTypePath}}" alt=""><h5>{{file.name}}</h5></a>
          <!-- <img src="{{path}}" alt=""> -->
          </div>
          <!-- <img src="./public/img/Block-1490729577837-IMG_0027.JPG" alt="">
          <img src="./img/Block-1490729577837-IMG_0027.JPG" alt=""> -->
        </form>
      </div>
    </div>


      <div ng-controller='dashController as dash'>
          <div class="containner">
            <div class="row">
              <div class="col-xs-3 userCodes" ng-repeat='uploads in dash.files'>

          <h2>Download Code: {{uploads.downloadCode}} Date Created: {{uploads.createdAt}}</h2>
          <div class="" ng-repeat='files in uploads.files'>
            <div class="uploadedFiles">

              <a href="/download?path={{files.path}}" download='{{files.name}}'><img class='icon' ng-src="{{files.fileTypePath}}" alt=""> <h6 ng-hide='name'>{{files.name}}</h6></a>
              <input type="text" name="" value="" placeholder="{{files.name}}" ng-show='name' ng-model='newName'>
            </div>

            <button class='btn btn-danger' ng-click='dash.delete(uploads._id, files)' ng-hide='name'>X</button>
            <button ng-click='name =! name' ng-hide='name'>edit file name</button>
            <button type="button" name="button" ng-click='dash.editName(uploads._id,files,newName)' ng-show='name'>submit name</button>
            <!-- <button type="button" name="button" ng-hide='name'>view</button> -->
          </div>

          <button class='btn btn-danger delete' ng-click='dash.deleteBlock(uploads._id,uploads.files)' alt='Delete this Bloc4'>X</button>
          <button class='btn btn-success add' ngf-select='dash.addToBlock(uploads._id,dash.newfiles)' multiple ng-model='dash.newfiles'>+</button>
          </div>
        </div>
      </div>
      </div>


  </body>
</html>
